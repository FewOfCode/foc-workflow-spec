### 节点通用属性

通用属性指所有的基础步骤所共有的属性,跟基础的步骤的类型无关.具体参考以下表格:

| 属性名称          | 类型   | 描述                                                                                         | 是否必填 | 默认值 |
| ----------------- | ------ | -------------------------------------------------------------------------------------------- | -------- | ------ |
| id                | string | 节点的唯一 ID                                                                                | 是       ||
| name | string | 节点名称 | 是 ||
| description | string | 节点描述 | 否 ||
| next              | string | 同级下上一个节点 ID                                                                          | 是       |    |
| containerId | string | 如果处于循环/条件/异常容器中的组件,则对应该容器的 ID                                         | 否      | root   |
| skip           | bool 或 string | 是否忽略该节点。当类型为string的时候，表示使用表达式计算值。                                        | 否      | false  |
| preDelay | int 或 string | 执行前延时。当类型为string的时候，表示使用表达式计算值。                                                     | 否      | 0      |
| postDelay | int 或 string | 执行后延时。当类型为string的时候，表示使用表达式计算值。                                                      | 否      | 0      |
| [errorStrategy](../README.md#异常策略) | object | 定义异常策略，当节点执行发生异常的时候执行异常策略。            | 否      |    |
| type             | enum | 节点类型。<br />start:开始<br />loop:循环容器<br />if:条件容器<br />break/continue 内置节点 | 否      | task   |
| end | bool | 是否为结束节点。 | 否 | false |

#### 基础节点

基础步骤即为类型为 task 的节点,反映到 air-bot 中为对应一个组件功能，除了继承基础属性外，额外增加以下属性

| 属性名称  | 类型   | 描述                 | 是否必填 | 默认值 |
| --------- | ------ | -------------------- | -------- | ------ |
| component | string | 节点对应的组件包调用 | 是       |
| Inputs    | map    | 输入参数字典         | 是       | {}     |
| Outputs   | map    | 输出参数字典         | 是       | {}     |

### 普通节点输入输出

普通节点对应的组件需要输入，同时运行完毕后也有对应的输出.即返回值,具体结构如下:

- 输入
  输入为一个 **[]map**的结构，map 的结构如下:

| 属性名称 | 类型   | 描述   | 是否必填 | 默认值 |
| -------- | ------ | ------ | -------- | ------ |
| name     | string | 参数名 | 是       |
| default  | any    | 默认值 | 否       | null   |

- 输出
  输出为一个 **[]string** 的格式，即为接受节点返回值的参数名称

### 三种节点对应的 JSON 格式.

- 开始节点

```json
{
  "id": "xxx",
  "pre": null,
  "Next": "xxxx",
  "ContainId": "root",
  "Name": "开始",
  "Skip": false,
  "Description": "开始节点",
  "DelayBeforeExec": 0,
  "DelayAfterExec": 0,
  "ExceptionStrategy": "exit",
  "ExceptionParams": {},
  "Type": "start"
}
```

- 结束节点

```json
{
  "Id": "xxx",
  "Pre": null,
  "Next": "xxxx",
  "ContainId": "root",
  "Name": "结束",
  "Skip": false,
  "Description": "结束节点",
  "DelayBeforeExec": 0,
  "DelayAfterExec": 0,
  "ExceptionStrategy": "exit",
  "ExceptionParams": {},
  "Type": "end"
}
```

- 普通节点

```json
{
  "Id": "xxx",
  "Pre": null,
  "Next": "xxxx",
  "ContainId": "root",
  "Name": "节点一",
  "Skip": false,
  "Description": "开始节点",
  "DelayBeforeExec": 0,
  "DelayAfterExec": 0,
  "ExceptionStrategy": "retry",
  "ExceptionParams": {},
  "RetryParams": {
    "IntervalSeconds": 10,
    "RetryCount": 1
  },

  "Component": "builtin.sleep",
  "Inputs": [
    {
      "Name": "seconds",
      "Default": 3
    }
  ],
  "Outputs":{}，
  "Type": "task"
}
```

### 流程控制节点

#### continue

continue 可用于循环容器中,会直接进入下次循环

#### break

break 同样可用于循环容器中,会直接跳出当前循环容器

#### 流程控制节点对应的 JSON 表达

- break

```json
{
  "Id": "xxx",
  "Pre": null,
  "Next": "xxxx",
  "ContainId": "root",
  "Name": "break节点",
  "Skip": false,
  "Description": "break节点",
  "Type": "break"
}
```

- continue

```json
{
  "Id": "xxx",
  "Pre": null,
  "Next": "xxxx",
  "ContainId": "root",
  "Name": "continue节点",
  "Skip": false,
  "Description": "continue节点",
  "Type": "continue"
}
```
