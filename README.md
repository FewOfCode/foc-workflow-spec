# Fow Of Code流程编排定义语言 - Version 0.1



## 目录

- [Fow Of Code流程编排定义语言 - Version 0.1](#fow-of-code流程编排定义语言---version-01)
  - [目录](#目录)
  - [基本介绍](#基本介绍)
  - [流程结构定义](#流程结构定义)
  - [节点关联定义](#节点关联定义)
    - [异常策略](#异常策略)
      - [retry](#retry)
      - [goto](#goto)
      - [exit](#exit)




## 基本介绍

foc-workflow-spec(Fow Of Code Workflow Specification)，流程编排定义语言用于描述和定义业务逻辑。



## 流程结构定义

| 属性名称          | 类型   | 描述                                                                                         | 是否必填 | 默认值 |
| ----------------- | ------ | -------------------------------------------------------------------------------------------- | -------- | ------ |
| id              | string | 流程定义id                                                                            | 是       ||
| version         | string | 流程定义版本                                                                      | 是       |    |
| name      | string | 流程定义名称                                     | 是       |    |
| description   | string | 流程定义描述                                                                             | 否       ||
| specVersion | string | 使用的规范版本 | 是 ||
| start | string | 开始节点 | 是 ||
| expressionLang | string | 定义表达式语言 | 否       |jq|
| nodes | array | 流程节点 | 是 ||
| metadata | object | 元数据 | 否 ||



## 节点关联定义

关联到节点的结构定义

### 异常策略

异常策略用于当节点执行发生异常的时候，触发的行为。

| 属性名称   | 类型   | 描述                                                         | 是否必填             | 默认值 |
| ---------- | ------ | ------------------------------------------------------------ | -------------------- | ------ |
| type       | enum   | 定义异常策略类型。异常策略目前有 3 种：`retry`，`goto`，`exit` | 是                   | `exit` |
| properties | object | 异常策略参数。可以为[retry](#retry)、[goto](#goto)、[exit](#exit)其中之一 | 除了`exit`类型，其他必填 |        |

#### retry

节点发生异常时，根据参数进行重试。

| 属性名称        | 类型 | 描述     | 是否必填 | 默认值 |
| --------------- | ---- | -------- | -------- | ------ |
| interval | int  | 重试间隔，单位：毫秒 | 否       | 0      |
| retryCount      | int  | 重试次数 | 是       | 1      |

#### goto

节点发生异常时，跳转到其他节点。

| 属性名称 | 类型   | 描述          | 是否必填 | 默认值 |
| -------- | ------ | ------------- | -------- | ------ |
| nodeId   | string | 跳转的节点 ID | 是       | end    |

#### exit

节点发生异常时，直接结束流程，无参数
